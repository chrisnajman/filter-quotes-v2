(()=>{var m=(t,a,s)=>new Promise((c,o)=>{var n=r=>{try{e(s.next(r))}catch(i){o(i)}},l=r=>{try{e(s.throw(r))}catch(i){o(i)}},e=r=>r.done?c(r.value):Promise.resolve(r.value).then(n,l);e((s=s.apply(t,a)).next())});function h(){let a="FILTER_QUOTES-V2-theme",s=document.querySelector(".theme-toggler"),c=s.querySelector(".light .visually-hidden"),o=s.querySelector(".dark .visually-hidden"),n=s.querySelector("button");function l(){try{let u=localStorage.getItem(a);return u?JSON.parse(u):!1}catch(u){return console.error("Error parsing theme from localStorage:",u),!1}}let e=l();function r(u){e=u,document.documentElement.classList.toggle("darkmode",e),localStorage.setItem(a,e),d()}function i(){r(!e)}function d(){c.textContent=e?" theme active":" theme inactive",o.textContent=e?" theme inactive":" theme active",n.setAttribute("aria-pressed",e?"false":"true")}n.addEventListener("click",i),r(e)}function g(){window.addEventListener("load",()=>{let t=document.getElementById("loader"),a=document.getElementById("page-loaded");t.classList.add("loader-hidden"),t.addEventListener("transitionend",()=>{t.remove(),a.textContent="Page has loaded.",a.setAttribute("aria-hidden","false")})})}function p(){document.querySelectorAll("details").forEach(t=>{let a=t.querySelector("summary");a.setAttribute("aria-expanded",t.open?"true":"false"),t.addEventListener("toggle",()=>{a.setAttribute("aria-expanded",t.open?"true":"false")}),t.addEventListener("keydown",s=>{s.key==="Escape"&&t.open&&(t.removeAttribute("open"),a.setAttribute("aria-expanded","false"),a.focus())})})}var v="./json/quotes.json",x=document.getElementById("fail"),A=document.getElementById("quotes-list"),L=document.getElementById("quote-template");function q(){return m(this,null,function*(){try{let t=yield fetch(v);if(t.ok){(yield t.json()).forEach(o=>{let n=L.content.cloneNode(!0),l=n.querySelector(".quote-container"),e=n.querySelector("[data-prequote]"),r=n.querySelector("[data-quote]"),i=n.querySelector("[data-postquote]"),d=n.querySelector("[data-author]"),u=n.querySelector("#tags"),S=n.querySelector("[data-tags]"),E=[...o.tags];e.textContent=o.prequote.trim(),r.textContent=o.quote.trim(),i.textContent=o.postquote.trim(),o.author===""?d.textContent="Unknown":d.textContent=o.author.trim(),E.length===0?u.classList.add("hide"):E.forEach(b=>{let f=document.createElement("button");f.setAttribute("type","button"),f.textContent=b.trim(),S.append(f)}),A.append(l)});let s=document.querySelectorAll(".quote button"),c={};s.forEach(o=>{let n=o.textContent.trim();c[n]=(c[n]||0)+1}),s.forEach(o=>{let n=o.textContent.trim();c[n]===1&&o.setAttribute("disabled","")})}else x.textContent="Something went wrong. Please try again later..."}catch(t){console.log(t)}})}function y(){let t=document.getElementById("clear-filters"),a=document.querySelectorAll(".quote"),s=document.querySelectorAll(".quote button, .tag-cloud button"),c=null;s.forEach(l=>{l.addEventListener("click",e=>{let r=e.target.textContent.trim();if(c===r){c=null,o();return}c=r,n(r)})}),t.addEventListener("click",()=>{c=null,o()});function o(){a.forEach(l=>l.removeAttribute("hidden")),t.classList.remove("active"),t.setAttribute("disabled","")}function n(l){a.forEach(e=>{let i=[...e.querySelectorAll("button")].some(d=>d.textContent.trim()===l);e.toggleAttribute("hidden",!i)}),s.forEach(e=>{e.classList.toggle("active",e.textContent.trim()===l)}),t.classList.add("active"),t.removeAttribute("disabled")}}h();g();p();function C(){return m(this,null,function*(){yield q(),y()})}C();})();
