(()=>{var m=(t,r,a)=>new Promise((l,o)=>{var n=s=>{try{e(a.next(s))}catch(i){o(i)}},c=s=>{try{e(a.throw(s))}catch(i){o(i)}},e=s=>s.done?l(s.value):Promise.resolve(s.value).then(n,c);e((a=a.apply(t,r)).next())});function g(){let r="FILTER_QUOTES-V2-theme",a=document.querySelector(".theme-toggler"),l=a.querySelector(".light .visually-hidden"),o=a.querySelector(".dark .visually-hidden"),n=a.querySelector("button");function c(){try{let u=localStorage.getItem(r);return u?JSON.parse(u):!1}catch(u){return console.error("Error parsing theme from localStorage:",u),!1}}let e=c();function s(u){e=u,document.documentElement.classList.toggle("darkmode",e),localStorage.setItem(r,e),d()}function i(){s(!e)}function d(){l.textContent=e?" theme active":" theme inactive",o.textContent=e?" theme inactive":" theme active",n.setAttribute("aria-pressed",e?"false":"true")}n.addEventListener("click",i),s(e)}function f(){window.addEventListener("load",()=>{let t=document.getElementById("loader"),r=document.getElementById("page-loaded");t.classList.add("loader-hidden"),t.addEventListener("transitionend",()=>{t.remove(),r.textContent="Page has loaded.",r.setAttribute("aria-hidden","false")})})}function h(){document.querySelectorAll("details").forEach(t=>{let r=t.querySelector("summary");r.setAttribute("aria-expanded",t.open?"true":"false"),t.addEventListener("toggle",()=>{r.setAttribute("aria-expanded",t.open?"true":"false")}),t.addEventListener("keydown",a=>{a.key==="Escape"&&t.open&&(t.removeAttribute("open"),r.setAttribute("aria-expanded","false"),r.focus())})})}function y(){let t=document.querySelector("html"),r=document.querySelector(".header");new ResizeObserver(l=>{for(let o of l){let n=getComputedStyle(o.target),c=parseFloat(n.paddingBlockStart),e=parseFloat(n.paddingBlockEnd),d=c+e+64,u=(o.contentRect.height+d)/16;t.style=`scroll-padding-top: ${u}rem`}}).observe(r)}var x="./json/quotes.json",A=document.getElementById("fail"),L=document.getElementById("quotes-list"),C=document.getElementById("quote-template");function q(){return m(this,null,function*(){try{let t=yield fetch(x);if(t.ok){(yield t.json()).forEach(o=>{let n=C.content.cloneNode(!0),c=n.querySelector(".quote-container"),e=n.querySelector("[data-prequote]"),s=n.querySelector("[data-quote]"),i=n.querySelector("[data-postquote]"),d=n.querySelector("[data-author]"),u=n.querySelector("#tags"),v=n.querySelector("[data-tags]"),S=[...o.tags];e.textContent=o.prequote.trim(),s.textContent=o.quote.trim(),i.textContent=o.postquote.trim(),o.author===""?d.textContent="Unknown":d.textContent=o.author.trim(),S.length===0?u.classList.add("hide"):S.forEach(b=>{let p=document.createElement("button");p.setAttribute("type","button"),p.textContent=b.trim(),v.append(p)}),L.append(c)});let a=document.querySelectorAll(".quote button"),l={};a.forEach(o=>{let n=o.textContent.trim();l[n]=(l[n]||0)+1}),a.forEach(o=>{let n=o.textContent.trim();l[n]===1&&o.setAttribute("disabled","")})}else A.textContent="Something went wrong. Please try again later..."}catch(t){console.log(t)}})}function E(){let t=document.getElementById("clear-filters"),r=document.querySelectorAll(".quote"),a=document.querySelectorAll(".quote button, .tag-cloud button"),l=null;a.forEach(c=>{c.addEventListener("click",e=>{let s=e.target.textContent.trim();if(l===s){l=null,o();return}l=s,n(s)})}),t.addEventListener("click",()=>{l=null,o()});function o(){r.forEach(c=>c.removeAttribute("hidden")),a.forEach(c=>c.classList.remove("active")),t.classList.remove("active"),t.setAttribute("disabled","")}function n(c){r.forEach(e=>{let i=[...e.querySelectorAll("button")].some(d=>d.textContent.trim()===c);e.toggleAttribute("hidden",!i)}),a.forEach(e=>{e.classList.toggle("active",e.textContent.trim()===c)}),t.classList.add("active"),t.removeAttribute("disabled")}}g();f();h();y();function k(){return m(this,null,function*(){yield q(),E()})}k();})();
