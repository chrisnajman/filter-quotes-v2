(()=>{var m=(t,s,a)=>new Promise((l,e)=>{var n=r=>{try{o(a.next(r))}catch(i){e(i)}},c=r=>{try{o(a.throw(r))}catch(i){e(i)}},o=r=>r.done?l(r.value):Promise.resolve(r.value).then(n,c);o((a=a.apply(t,s)).next())});function f(){let s="FILTER_QUOTATIONS-theme",a=document.querySelector(".theme-toggler"),l=a.querySelector(".light .visually-hidden"),e=a.querySelector(".dark .visually-hidden"),n=a.querySelector("button");function c(){try{let u=localStorage.getItem(s);return u?JSON.parse(u):!1}catch(u){return console.error("Error parsing theme from localStorage:",u),!1}}let o=c();function r(u){o=u,document.documentElement.classList.toggle("darkmode",o),localStorage.setItem(s,o),d()}function i(){r(!o)}function d(){l.textContent=o?" theme active":" theme inactive",e.textContent=o?" theme inactive":" theme active",n.setAttribute("aria-pressed",o?"false":"true")}n.addEventListener("click",i),r(o)}function h(){window.addEventListener("load",()=>{let t=document.getElementById("loader"),s=document.getElementById("page-loaded");t.classList.add("loader-hidden"),t.addEventListener("transitionend",()=>{t.remove(),s.textContent="Page has loaded.",s.setAttribute("aria-hidden","false")})})}function q(){document.querySelectorAll("details").forEach(t=>{let s=t.querySelector("summary");s.setAttribute("aria-expanded",t.open?"true":"false"),t.addEventListener("toggle",()=>{s.setAttribute("aria-expanded",t.open?"true":"false")}),t.addEventListener("keydown",a=>{a.key==="Escape"&&t.open&&(t.removeAttribute("open"),s.setAttribute("aria-expanded","false"),s.focus())})})}function y(){let t=document.querySelector("html"),s=document.querySelector(".header");new ResizeObserver(l=>{for(let e of l){let n=getComputedStyle(e.target),c=getComputedStyle(t),o=parseFloat(n.paddingBlockStart),r=parseFloat(n.paddingBlockEnd),i=o+r,d=parseFloat(c.getPropertyValue("--skip-link-gap"))||0,u=i+d,p=(e.contentRect.height+u)/16;t.style=`scroll-padding-top: ${p}rem`}}).observe(s)}function E(t){return t.trim().split(/\s+/).length}var b="./json/quotes.json",x=document.getElementById("fail"),A=document.getElementById("quotes-list"),L=document.getElementById("quote-template");function S(){return m(this,null,function*(){try{let t=yield fetch(b);if(t.ok){(yield t.json()).forEach(e=>{let n=L.content.cloneNode(!0),c=n.querySelector(".quote-container"),o=n.querySelector(".text-container"),r=n.querySelector("[data-author]"),i=n.querySelector("#tags"),d=n.querySelector("[data-tags]"),u=[...e.tags];E(e.quote.trim())>25?o.innerHTML=`
            <div class="quote-text flow">
                <p class="pre-quote">${e.prequote.trim()}</p>
                <blockquote>${e.quote.trim()}</blockquote>
                <p class="post-quote">${e.postquote.trim()}</p>
            </div>
        `:o.innerHTML=`
            <p class="quote-text">
                <span class="pre-quote">${e.prequote.trim()}</span>
                <q>${e.quote.trim()}</q>
                <span class="post-quote">${e.postquote.trim()}</span>
            </p>
        `,e.author===""?r.textContent="Unknown":r.textContent=e.author.trim(),u.length===0?i.classList.add("hide"):u.forEach(p=>{let g=document.createElement("button");g.setAttribute("type","button"),g.textContent=p.trim(),d.append(g)}),A.append(c)});let a=document.querySelectorAll(".quote button"),l={};a.forEach(e=>{let n=e.textContent.trim();l[n]=(l[n]||0)+1}),a.forEach(e=>{let n=e.textContent.trim();l[n]===1&&e.setAttribute("disabled","")})}else x.textContent="Something went wrong. Please try again later..."}catch(t){console.log(t)}})}function v(){let t=document.getElementById("clear-filters"),s=document.querySelectorAll(".quote"),a=document.querySelectorAll(".quote button, .tag-cloud button"),l=null;a.forEach(c=>{c.addEventListener("click",o=>{let r=o.target.textContent.trim();if(l===r){l=null,e();return}l=r,n(r)})}),t.addEventListener("click",()=>{l=null,e()});function e(){s.forEach(c=>c.removeAttribute("hidden")),a.forEach(c=>c.classList.remove("active")),t.classList.remove("active"),t.setAttribute("disabled","")}function n(c){s.forEach(o=>{let i=[...o.querySelectorAll("button")].some(d=>d.textContent.trim()===c);o.toggleAttribute("hidden",!i)}),a.forEach(o=>{o.classList.toggle("active",o.textContent.trim()===c)}),t.classList.add("active"),t.removeAttribute("disabled")}}f();h();q();y();function k(){return m(this,null,function*(){yield S(),v()})}k();})();
