(()=>{var m=(t,s,r)=>new Promise((l,o)=>{var n=a=>{try{e(r.next(a))}catch(i){o(i)}},c=a=>{try{e(r.throw(a))}catch(i){o(i)}},e=a=>a.done?l(a.value):Promise.resolve(a.value).then(n,c);e((r=r.apply(t,s)).next())});function h(){let s="FILTER_QUOTES-V2-theme",r=document.querySelector(".theme-toggler"),l=r.querySelector(".light .visually-hidden"),o=r.querySelector(".dark .visually-hidden"),n=r.querySelector("button");function c(){try{let u=localStorage.getItem(s);return u?JSON.parse(u):!1}catch(u){return console.error("Error parsing theme from localStorage:",u),!1}}let e=c();function a(u){e=u,document.documentElement.classList.toggle("darkmode",e),localStorage.setItem(s,e),d()}function i(){a(!e)}function d(){l.textContent=e?" theme active":" theme inactive",o.textContent=e?" theme inactive":" theme active",n.setAttribute("aria-pressed",e?"false":"true")}n.addEventListener("click",i),a(e)}function g(){window.addEventListener("load",()=>{let t=document.getElementById("loader"),s=document.getElementById("page-loaded");t.classList.add("loader-hidden"),t.addEventListener("transitionend",()=>{t.remove(),s.textContent="Page has loaded.",s.setAttribute("aria-hidden","false")})})}function p(){document.querySelectorAll("details").forEach(t=>{let s=t.querySelector("summary");s.setAttribute("aria-expanded",t.open?"true":"false"),t.addEventListener("toggle",()=>{s.setAttribute("aria-expanded",t.open?"true":"false")}),t.addEventListener("keydown",r=>{r.key==="Escape"&&t.open&&(t.removeAttribute("open"),s.setAttribute("aria-expanded","false"),s.focus())})})}var b="./json/quotes.json",x=document.getElementById("fail"),A=document.getElementById("quotes-list"),L=document.getElementById("quote-template");function q(){return m(this,null,function*(){try{let t=yield fetch(b);if(t.ok){(yield t.json()).forEach(o=>{let n=L.content.cloneNode(!0),c=n.querySelector(".quote-container"),e=n.querySelector("[data-prequote]"),a=n.querySelector("[data-quote]"),i=n.querySelector("[data-postquote]"),d=n.querySelector("[data-author]"),u=n.querySelector("#tags"),S=n.querySelector("[data-tags]"),E=[...o.tags];e.textContent=o.prequote.trim(),a.textContent=o.quote.trim(),i.textContent=o.postquote.trim(),o.author===""?d.textContent="Unknown":d.textContent=o.author.trim(),E.length===0?u.classList.add("hide"):E.forEach(v=>{let f=document.createElement("button");f.setAttribute("type","button"),f.textContent=v.trim(),S.append(f)}),A.append(c)});let r=document.querySelectorAll(".quote button"),l={};r.forEach(o=>{let n=o.textContent.trim();l[n]=(l[n]||0)+1}),r.forEach(o=>{let n=o.textContent.trim();l[n]===1&&o.setAttribute("disabled","")})}else x.textContent="Something went wrong. Please try again later..."}catch(t){console.log(t)}})}function y(){let t=document.getElementById("clear-filters"),s=document.querySelectorAll(".quote"),r=document.querySelectorAll(".quote button, .tag-cloud button"),l=null;r.forEach(c=>{c.addEventListener("click",e=>{let a=e.target.textContent.trim();if(l===a){l=null,o();return}l=a,n(a)})}),t.addEventListener("click",()=>{l=null,o()});function o(){s.forEach(c=>c.removeAttribute("hidden")),r.forEach(c=>c.classList.remove("active")),t.classList.remove("active"),t.setAttribute("disabled","")}function n(c){s.forEach(e=>{let i=[...e.querySelectorAll("button")].some(d=>d.textContent.trim()===c);e.toggleAttribute("hidden",!i)}),r.forEach(e=>{e.classList.toggle("active",e.textContent.trim()===c)}),t.classList.add("active"),t.removeAttribute("disabled")}}h();g();p();function C(){return m(this,null,function*(){yield q(),y()})}C();})();
