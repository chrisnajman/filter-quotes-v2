(()=>{var f=(e,t,o)=>new Promise((n,s)=>{var r=a=>{try{l(o.next(a))}catch(c){s(c)}},u=a=>{try{l(o.throw(a))}catch(c){s(c)}},l=a=>a.done?n(a.value):Promise.resolve(a.value).then(r,u);l((o=o.apply(e,t)).next())});function q(){let t="FILTER_QUOTATIONS-theme",o=document.querySelector(".theme-toggler"),n=document.querySelector(".light"),s=document.querySelector(".dark"),r=o.querySelector(".light .visually-hidden"),u=o.querySelector(".dark .visually-hidden"),l=o.querySelector("button");function a(){try{let m=localStorage.getItem(t);return m?JSON.parse(m):!1}catch(m){return console.error("Error parsing theme from localStorage:",m),!1}}let c=a();function d(m){c=m,document.documentElement.classList.toggle("darkmode",c),localStorage.setItem(t,c),h()}function i(){d(!c)}function h(){r.textContent=c?" theme inactive":" theme active",u.textContent=c?" theme active":" theme inactive";let m=r.textContent,p=u.textContent;_(m,n),_(p,s),l.setAttribute("aria-pressed",c?"false":"true")}function _(m,p){m===" theme active"?p.classList.add("underline"):p.classList.remove("underline")}l.addEventListener("click",i),d(c)}function y(){window.addEventListener("load",()=>{let e=document.getElementById("loader"),t=document.getElementById("page-loaded");e.classList.add("loader-hidden"),e.addEventListener("transitionend",()=>{e.remove(),t.textContent="Page has loaded.",t.setAttribute("aria-hidden","false")})})}function S(){document.querySelectorAll("details").forEach(e=>{let t=e.querySelector("summary");t.setAttribute("aria-expanded",e.open?"true":"false"),e.addEventListener("toggle",()=>{t.setAttribute("aria-expanded",e.open?"true":"false")}),e.addEventListener("keydown",o=>{o.key==="Escape"&&e.open&&(e.removeAttribute("open"),t.setAttribute("aria-expanded","false"),t.focus())})})}function x(){let e=document.querySelector("html"),t=document.querySelector(".header");new ResizeObserver(n=>{for(let s of n){let r=getComputedStyle(s.target),u=getComputedStyle(e),l=parseFloat(r.paddingBlockStart),a=parseFloat(r.paddingBlockEnd),c=l+a,d=parseFloat(u.getPropertyValue("--skip-link-gap"))||0,i=c+d,h=(s.contentRect.height+i)/16;e.style=`scroll-padding-top: ${h}rem`}}).observe(t)}function E(e){return e.reduce((t,o)=>(o&&(t[o]=(t[o]||0)+1),t),{})}function b(e,t){return e.filter(o=>t[o]===1)}function A(e,t){e.forEach(o=>{let n=o.textContent.trim();t.includes(n)&&o.setAttribute("disabled","")})}function L(e){e.sort((t,o)=>{let n=t.hasAttribute("disabled"),s=o.hasAttribute("disabled");if(n!==s)return n?1:-1;let r=t.textContent.trim().toLowerCase(),u=o.textContent.trim().toLowerCase();return r.localeCompare(u)})}function g(e,t){e.forEach(o=>{let n=document.createElement("button");n.type="button",n.textContent=o,t.append(n)})}function F(e){return e.trim().split(/\s+/).length}var H=document.getElementById("quotes-list"),R=document.getElementById("quote-template");function B(e){e.forEach(t=>{let o=R.content.cloneNode(!0),n=o.querySelector(".quote-container"),s=o.querySelector(".text-container"),r=o.querySelector("[data-author]"),u=o.querySelector("#tags"),l=o.querySelector("[data-tags]"),a=[...t.tags];a.sort(),F(t.quote.trim())>25?s.innerHTML=`
              <div class="quote-text flow">
                  <p class="pre-quote">${t.prequote.trim()}</p>
                  <blockquote>${t.quote.trim()}</blockquote>
                  <p class="post-quote">${t.postquote.trim()}</p>
              </div>
          `:s.innerHTML=`
              <p class="quote-text">
                  <span class="pre-quote">${t.prequote.trim()}</span>
                  <q>${t.quote.trim()}</q>
                  <span class="post-quote">${t.postquote.trim()}</span>
              </p>
          `,t.author===""?r.textContent="Unknown":r.textContent=t.author.trim(),a.length===0?u.classList.add("hide"):a.forEach(c=>{let d=document.createElement("button");d.setAttribute("type","button"),d.textContent=c.trim(),l.append(d)}),H.append(n)})}function T(){let e=document.querySelectorAll(".quote button"),t={};e.forEach(o=>{let n=o.textContent.trim();t[n]=(t[n]||0)+1}),e.forEach(o=>{let n=o.textContent.trim();t[n]===1&&o.setAttribute("disabled","")})}var P=document.getElementById("all-authors"),D=document.getElementById("all-authors-template");function v(e){let t=e.map(r=>r.author.trim()).filter(r=>r!=="").sort(),o=[...new Set(t)];if(o.length===0)return;let s=D.content.cloneNode(!0).querySelector("[data-all-authors]");g(o,s),P.append(s)}var G=document.getElementById("all-tags"),$=document.getElementById("all-tags-template");function C(e){let t=e.flatMap(r=>r.tags||[]).map(r=>r.trim()).filter(r=>r!=="").sort(),o=[...new Set(t)];if(o.length===0)return;let s=$.content.cloneNode(!0).querySelector("[data-all-tags]");g(o,s),G.append(s)}function k(e){let t=e.map(i=>i.author.trim()).filter(i=>i!=="").sort(),o=e.flatMap(i=>i.tags||[]).map(i=>i.trim()).filter(i=>i!=="").sort(),n=E(t),s=E(o),r=b(t,n),u=b(o,s),l=[...document.querySelectorAll("[data-all-authors] button")],a=[...document.querySelectorAll("[data-all-tags] button")];A(l,r),A(a,u),L(l),L(a);let c=document.querySelector("[data-all-authors]"),d=document.querySelector("[data-all-tags]");l.forEach(i=>c.appendChild(i)),a.forEach(i=>d.appendChild(i))}var M="./json/quotes.json",U=document.getElementById("fail");function I(){return f(this,null,function*(){try{let e=yield fetch(M);if(e.ok){let t=yield e.json();B(t),T(),v(t),C(t),k(t)}else U.textContent="Something went wrong. Please try again later..."}catch(e){console.error(e)}})}function w(){let e=document.getElementById("clear-filters"),t=document.querySelectorAll(".quote"),o=document.querySelectorAll(".quote button"),n=null;o.forEach(u=>{u.addEventListener("click",l=>{let a=l.target.textContent.trim();if(n===a){n=null,s();return}n=a,r(a)})}),e.addEventListener("click",()=>{n=null,s()});function s(){t.forEach(u=>u.removeAttribute("hidden")),o.forEach(u=>u.classList.remove("active")),e.classList.remove("active"),e.setAttribute("disabled","")}function r(u){t.forEach(l=>{let c=[...l.querySelectorAll("button")].some(d=>d.textContent.trim()===u);l.toggleAttribute("hidden",!c)}),o.forEach(l=>{l.classList.toggle("active",l.textContent.trim()===u)}),e.classList.add("active"),e.removeAttribute("disabled")}return{applyFilter:r,filterInactive:s}}function O({applyFilter:e,filterInactive:t}){document.querySelectorAll("aside button").forEach(n=>{n.addEventListener("click",s=>{let r=s.target.textContent.trim();t(),e(r),s.target.closest("details").removeAttribute("open")})})}q();y();S();x();function N(){return f(this,null,function*(){yield I();let{applyFilter:e,filterInactive:t}=w();O({applyFilter:e,filterInactive:t})})}N();})();
